<html>
<head>

	<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
	<script src="js/jquery.min.js"></script>

	<script>
		compdata=new Object();
		var blocked=0;
		function comp()
		{
		$.getJSON("https://ppdb-ep.herokuapp.com/compdata",function (obj) {
		var i;
		for(i=0;i<obj.length;i++)
		{
				if(obj[i].Name==document.getElementById("company").value)

					compdata=obj[i];
					break;
		}



        });
	}
		function details(){

		$.get("https://ppdb-ep.herokuapp.com/placement",
	{

					//"usn":"01FB15ECS349"
					"usn":document.getElementById("usn").value
	},
	function (data) {

		check_eligiblity_gpa(compdata,data);
		//check_eligibility_tier(compdata,data);
		var div=document.createElement("div");
		if(blocked==0)
		{
			div.innerHTML="Not blocked";
			console.log("not blocked");
		}
		else
		{
			console.log("blocked");
			div.innerHTML="Blocked";
		}
		document.body.appendChild(div);

        });
	}
	function check_eligiblity_gpa(company,student)
{

		if(company.GPA=="OPEN")

		{
			blocked=0;
		}
		else if(student.score_gpa < company.GPA)
		{
			blocked=1;
		}
}
function check_eligibility_tier(company,student)
{

		if(company.fte=='yes' && company.internship=='yes')
		{

			if(student.tier < company.tier)
			{
				blocked=1;
			}
		}
		else if(company.fte=='yes'&& company.internship=='no')
			{
				if(student.fte_status=='yes')
				{
					blocked=1;
				}
			}
		else
		{
			if(student.intern_status=='yes')
			{
				blocked=1;
			}
		}
}



	</script>
</head>
<body >
	COMPANY:<input type="text" id="company" onblur=comp()></input>
	USN:<input type="text" id="usn" onblur=details()></input>

</body>
</html>
